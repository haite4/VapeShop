{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}

<div class="accordion mx-auto" id="accordionExample">
    <h6 class="mb-3">Account {{user_profile}}</h6>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#personalinfo" aria-expanded="true" aria-controls="collapseOne">
            <svg width="35" height="35" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 8C6.10457 8 7 7.10457 7 6C7 4.89543 6.10457 4 5 4C3.89543 4 3 4.89543 3 6C3 7.10457 3.89543 8 5 8Z" fill="black"/>
                <path d="M9 5.5C9 5.22386 9.22386 5 9.5 5H13.5C13.7761 5 14 5.22386 14 5.5C14 5.77614 13.7761 6 13.5 6H9.5C9.22386 6 9 5.77614 9 5.5Z" fill="black"/>
                <path d="M9 8C9 7.72386 9.22386 7.5 9.5 7.5H13.5C13.7761 7.5 14 7.72386 14 8C14 8.27614 13.7761 8.5 13.5 8.5H9.5C9.22386 8.5 9 8.27614 9 8Z" fill="black"/>
                <path d="M10 10.5C10 10.2239 10.2239 10 10.5 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H10.5C10.2239 11 10 10.7761 10 10.5Z" fill="black"/>
                <path d="M2 2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4C16 2.89543 15.1046 2 14 2H2ZM1 4C1 3.44772 1.44772 3 2 3H14C14.5523 3 15 3.44772 15 4V12C15 12.5523 14.5523 13 14 13H8.95949C8.98619 12.8367 9 12.6698 9 12.5C9 10.567 7.20914 9 5 9C2.91369 9 1.20043 10.3976 1.01637 12.1812C1.00562 12.1224 1 12.0619 1 12V4Z" fill="black"/>
                </svg>
                <span class="ms-3">Personal data</span>
        </button>
  
      </h2>
      <div id="personalinfo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <style>
                th, td {
                  padding: 20px;
                  margin: 50px; /* Увеличиваем отступы до 20 пикселей */
                }
              </style>
            <table >
                <thead>
                  <tr>
                    <th>First name</th>
                    <th>Last name</th>
                    <th>profile creation date</th>
                  </tr>
                </thead>
                <tbody>
                  <tr >
                    <td>{{user_profile.user.first_name}}</td>
                    <td>{{user_profile.user.last_name}}</td>
                    <td>{{user_profile.user.date_joined}}</td>
                  </tr>
               
                </tbody>
              </table>
              
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#logininfo" aria-expanded="false" aria-controls="collapseTwo">
            <svg width="38" height="38" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 1C9.10457 1 10 1.89543 10 3V7H6V3C6 1.89543 6.89543 1 8 1ZM11 7V3C11 1.34315 9.65685 0 8 0C6.34315 0 5 1.34315 5 3V7C3.89543 7 3 7.89543 3 9V14C3 15.1046 3.89543 16 5 16H11C12.1046 16 13 15.1046 13 14V9C13 7.89543 12.1046 7 11 7Z" fill="black"/>
                </svg>
                <span class="ms-3">Login (email)</span>
               
        </button>
      </h2>
      <div id="logininfo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
           
            <p class="mt-4">Сurrent address:  <strong>{{user_profile.user.email}}</strong></p>
            <br>
            <form action="{% url  'account:change-email' %}" method="post">
              <p>Edit your email</p>
              {% csrf_token %}
              {% render_field email_form.email class="form-control me-4" id="email" placeholder="email" style="width: 300px;" %}
              <button class="btn btn-success mt-4">Edit</button>
            </form>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#shipadress" aria-expanded="false" aria-controls="collapseThree">
            <svg width="40" height="40" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 3.5C0 2.67157 0.671573 2 1.5 2H10.5C11.3284 2 12 2.67157 12 3.5V5H13.0194C13.4751 5 13.906 5.20713 14.1907 5.56296L15.6713 7.41374C15.8841 7.67971 16 8.01017 16 8.35078V10.5C16 11.3284 15.3284 12 14.5 12H14C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12H5C5 13.1046 4.10457 14 3 14C1.89543 14 1 13.1046 1 12C1 11.9716 1.00059 11.9434 1.00176 11.9153C0.418245 11.7098 0 11.1538 0 10.5V3.5ZM1.29396 10.9557C1.64562 10.3824 2.27815 10 3 10C3.74028 10 4.38663 10.4022 4.73244 11H10.2676C10.4432 10.6964 10.6964 10.4432 11 10.2676V3.5C11 3.22386 10.7761 3 10.5 3H1.5C1.22386 3 1 3.22386 1 3.5V10.5C1 10.7027 1.1206 10.8772 1.29396 10.9557ZM12 10C12.7403 10 13.3866 10.4022 13.7324 11H14.5C14.7761 11 15 10.7761 15 10.5V8.35078C15 8.23725 14.9614 8.12709 14.8904 8.03843L13.4098 6.18765C13.3149 6.06905 13.1713 6 13.0194 6H12V10ZM3 11C2.44772 11 2 11.4477 2 12C2 12.5523 2.44772 13 3 13C3.55228 13 4 12.5523 4 12C4 11.4477 3.55228 11 3 11ZM12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11Z" fill="black"/>
                </svg>
                <span class="ms-3">delivery address</span>
               
        </button>
      </h2>
    </div>
      <div id="shipadress" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <form action="{% url 'account:shipment-form' %}" method="post">
                {% csrf_token %}
                <div class="d-flex">
                    <div class="input-wrapper">
                        <label for="ship_adress">Ship adress</label>
                        {% render_field form.ship_adress class="form-control me-4" id="ship_adress" placeholder="Ship adress" style="width: 500px;" %}
                       
                    
                    </div>

                      
                    <div class="input-wrapper">
                        <label for="ship_city">Ship city</label>
                        {% render_field form.ship_city class="form-control me-4" id="ship_city" placeholder="Ship city" style="width: 300px;" %}
                        
                    
                    </div>
                    <div class="input-wrapper">
                        <label for="postal_code">Postal code</label>
                        {% render_field form.ship_postal_code class="form-control me-4" id="postal_code" placeholder="postal code"  style="width: 130px;" %}
                    </div>
                 
                </div>
                
                <button class="btn btn-success mt-4">Submit</button>
            </form>
            
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#orderinfo" aria-expanded="false" aria-controls="collapseTwo">
            <svg width="40" height="40" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="14" height="15.5" transform="translate(0 0.5)" fill="white"/>
              <path d="M7 1C8.38071 1 9.5 2.11929 9.5 3.5V4H4.5V3.5C4.5 2.11929 5.61929 1 7 1ZM10.5 4V3.5C10.5 1.567 8.933 0 7 0C5.067 0 3.5 1.567 3.5 3.5V4H0V14C0 15.1046 0.895431 16 2 16H12C13.1046 16 14 15.1046 14 14V4H10.5Z" fill="black"/>
              </svg>
              
                  <span class="ms-3">information about order

                  </span>
          </button>
        </h2>
        <div id="orderinfo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
          <div class="accordion-body">
              <p class="text-dark"><strong>Order</strong></p>
            
              <table >
                <thead>
                  <tr>
                    <th>Order id</th>
                    <th>created at</th>
                    <th>City</th>
                    <th>Postal code</th>
                    <th>Adress</th>
                    <th>Paid</th>
                  </tr>
                </thead>
                {% if user_order|length  > 0  %}
                {% for order in user_order %}
               
                <tbody>
                  <tr>
                    <td>{{order.id}}</td>
                    <td>{{order.created_at}}</td>
                    <td>{{order.city}}</td>
                    <td>{{order.postal_code}}</td>
                    <td>{{order.adress}}</td>
                    
                   
                    <td>
                     
                      <svg width="40" height="40"   viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM12.0303 4.96967C11.7374 4.67678 11.2626 4.67678 10.9697 4.96967C10.9626 4.97674 10.9559 4.98424 10.9498 4.9921L7.4774 9.41674L5.38388 7.32322C5.09098 7.03033 4.61611 7.03033 4.32322 7.32322C4.03032 7.61612 4.03032 8.09099 4.32322 8.38388L6.96966 11.0303C7.26256 11.3232 7.73743 11.3232 8.03032 11.0303C8.03685 11.0238 8.043 11.0169 8.04876 11.0097L12.041 6.01947C12.3232 5.72582 12.3196 5.25897 12.0303 4.96967Z" fill="green"/>
                        </svg>
                    </td>
          
              
                  </tr>
                 
                  <tr>
                    <td colspan="4"><hr></td>
                  </tr>
                  {% endfor %}    
                  {% else %}
                
                  <span class="text-danger ms-4">You dont have order</span>
                
                  {% endif %}
                </tbody>

              </table>
              <br>
              
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
